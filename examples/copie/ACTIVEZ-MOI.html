<!DOCTYPE html>

<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Activation de ma Conteuse</title>

    <script type="text/javascript" src="Secrets/info.js"></script>

    <script type="text/javascript">
        const storytellerRegisterUrl = new URL("https://club.joyeuse.io/storyteller-register");

        /**
         * Camelize a string, cutting the string by separator character.
         *
         * @param text string - Text to camelize
         * @param separator string - Word separator (underscore by default)
         *
         * @return string Camelized text
         */
        function camelize(text, separator) {
            text = text.toLowerCase();

            // Assume separator is _ if no one has been provided.
            if (typeof (separator) == "undefined") {
                separator = "_";
            }

            // Cut the string into words
            let words = text.split(separator);

            // Concatenate all capitalized words to get camelized string
            let result = "";
            for (let i = 0; i < words.length; i++) {
                let word = words[i];
                let capitalizedWord;
                if (i !== 0) { // Not on first word
                    capitalizedWord = word.charAt(0).toUpperCase() + word.slice(1);
                } else {
                    capitalizedWord = word;
                }
                result += capitalizedWord;
            }

            return result;
        }

        for (let arg in info) {
            if (info.hasOwnProperty(arg)) {
                storytellerRegisterUrl.searchParams.append(camelize(arg), info[arg]);
            }
        }

        window.location.href = storytellerRegisterUrl.href;
    </script>

    <noscript>
        <meta http-equiv="refresh" content="0; url=https://club.joyeuse.io/no-javascript" />
    </noscript>
</head>

<body>
</body>
</html>
